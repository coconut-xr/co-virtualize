(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[34],{3349:function(e,a,t){"use strict";var n=this&&this.__assign||function(){return(n=Object.assign||function(e){for(var a,t=1,n=arguments.length;t<n;t++)for(var o in a=arguments[t])Object.prototype.hasOwnProperty.call(a,o)&&(e[o]=a[o]);return e}).apply(this,arguments)},o=this&&this.__createBinding||(Object.create?function(e,a,t,n){void 0===n&&(n=t),Object.defineProperty(e,n,{enumerable:!0,get:function(){return a[t]}})}:function(e,a,t,n){void 0===n&&(n=t),e[n]=a[t]}),s=this&&this.__setModuleDefault||(Object.create?function(e,a){Object.defineProperty(e,"default",{enumerable:!0,value:a})}:function(e,a){e.default=a}),c=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var a={};if(null!=e)for(var t in e)"default"!==t&&Object.prototype.hasOwnProperty.call(e,t)&&o(a,e,t);return s(a,e),a},p=this&&this.__spreadArray||function(e,a,t){if(t||2===arguments.length)for(var n,o=0,s=a.length;o<s;o++)!n&&o in a||(n||(n=Array.prototype.slice.call(a,0,o)),n[o]=a[o]);return e.concat(n||Array.prototype.slice.call(a))};Object.defineProperty(a,"__esModule",{value:!0}),a.useVirtual=a.VirtualBase=void 0;var r=c(t(7378)),m=t(2286),k=(0,r.createContext)(null);function N(e,a){switch(a.type){case"set":return p(p([],e.filter((function(e){return e.id!==a.id})),!0),[{connected:!0,component:a.component,index:a.index,id:a.id,props:a.props}],!1).sort((function(e,a){return e.index-a.index}));case"unset":return e.map((function(e){return a.id===e.id?n(n({},e),{connected:!1,props:void 0}):e}));case"destroy":return e.filter((function(e){return e.id!=a.id})).sort((function(e,a){return e.index-a.index}))}}a.VirtualBase=function(e){var a=e.children,t=(0,r.useReducer)(N,[]),o=t[0],s=t[1],c=(0,r.useMemo)((function(){return{set:function(e,a,t,n){return s({type:"set",id:e,index:a,props:n,component:t})},unset:function(e){return s({type:"unset",id:e})}}}),[s]),p=(0,r.useMemo)((function(){return o.map((function(e){var a=e.component,t=e.id,o=e.props,c=e.connected;return r.default.createElement(a,n({key:t,connected:c,destroy:function(){return s({type:"destroy",id:t})}},o))}))}),[o,s]);return r.default.createElement(k.Provider,{value:c},a,p)},a.useVirtual=function(e,a,t,n){var o=(0,r.useContext)(k),s=o.set,c=o.unset,p=(0,r.useMemo)((function(){return null!==n&&void 0!==n?n:(0,m.v4)()}),[n]);(0,r.useEffect)((function(){s(p,null!==t&&void 0!==t?t:0,e,a)}),[s,t,a,p,e]),(0,r.useEffect)((function(){return function(){return c(p)}}),[p,c])}},9138:function(e,a,t){"use strict";t.d(a,{$:function(){return c}});var n=t(5675),o=t(4246),s=function(e){var a=e.src;return"/co-virtualize".concat(a)};function c(){return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("div",{className:"flex-grow-1"}),(0,o.jsx)("footer",{className:"bg-light",children:(0,o.jsxs)("div",{className:"d-flex align-items-center justify-content-around p-3 container-lg",children:[(0,o.jsxs)("a",{target:"_blank",href:"https://github.com/cocoss-org/co-virtualize",className:"text-black d-flex flex-row align-items-center",children:[(0,o.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",className:"bi bi-github mx-2",viewBox:"0 0 16 16",children:(0,o.jsx)("path",{d:"M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.012 8.012 0 0 0 16 8c0-4.42-3.58-8-8-8z"})}),(0,o.jsx)("span",{className:"h5 mb-0",children:"Github"})]}),(0,o.jsx)("a",{target:"_blank",href:"https://www.coconut-xr.com/",children:(0,o.jsx)(n.default,{loader:s,width:212.5,height:50,src:"/powered-by.svg"})})]})})]})}},1655:function(e,a,t){"use strict";t.d(a,{h:function(){return p}});var n=t(7378),o=t(1664),s=t(4246),c=[{title:"List",url:"/list"}];function p(e){var a=e.selectedIndex,t=(0,n.useState)(!1),p=t[0],r=t[1];return(0,s.jsx)("nav",{className:"navbar navbar-expand-lg navbar-light bg-light",children:(0,s.jsxs)("div",{className:"container-fluid",children:[(0,s.jsx)(o.default,{href:"/",passHref:!0,children:(0,s.jsx)("a",{className:"navbar-brand",children:"co-virtualize examples"})}),(0,s.jsx)("button",{className:"navbar-toggler",type:"button",onClick:function(){return r(!p)},"data-bs-toggle":"collapse","data-bs-target":"#navbarNavDropdown","aria-controls":"navbarNavDropdown","aria-expanded":"false","aria-label":"Toggle navigation",children:(0,s.jsx)("span",{className:"navbar-toggler-icon"})}),(0,s.jsx)("div",{className:"align-self-flex-end navbar-collapse ".concat(p?"":"collapse"),children:(0,s.jsx)("ul",{className:"navbar-nav",children:c.map((function(e,t){var n=e.title,c=e.url;return(0,s.jsx)("li",{className:"nav-item",children:(0,s.jsx)(o.default,{href:c,passHref:!0,children:(0,s.jsx)("a",{className:"nav-link ".concat(t===a?"active":""),children:n})})},n)}))})})]})})}},5478:function(e,a,t){"use strict";t.r(a),t.d(a,{default:function(){return h}});var n=t(8152),o=t(7378),s=t(9008),c=t(3349),p=t(9920),r=t(1655),m=t(9138),k=t(7462),N=t(4925),l=t(3905),i=["components"],d={};function u(e){var a=e.components,t=(0,N.Z)(e,i);return(0,l.kt)("wrapper",(0,k.Z)({},d,t,{components:a,mdxType:"MDXLayout"}),(0,l.kt)("h1",null,"List Example"),(0,l.kt)("p",null,"We create a list of numbers 0-99 and will filter them using a text input."),(0,l.kt)("p",null,"To animate the filtered numbers we virtualize them to control them even after they are filtered."),(0,l.kt)("h2",null,"Virtualized List Item"),(0,l.kt)("p",null,"We create a list item that is virtualized using the ",(0,l.kt)("inlineCode",{parentName:"p"},"useVirtual")," hook.",(0,l.kt)("br",{parentName:"p"}),"\n","The virtualized item, in this case the ",(0,l.kt)("inlineCode",{parentName:"p"},"ListItem"),", it's properties, the index at which it should be rendered and a uniquie identifier is passed into the hook."),(0,l.kt)("p",null,"This way we can render a ",(0,l.kt)("inlineCode",{parentName:"p"},"VirtualizedListItem"),", which will result in the creation of a normal ",(0,l.kt)("inlineCode",{parentName:"p"},"ListItem"),". However, the ",(0,l.kt)("inlineCode",{parentName:"p"},"ListItem")," can live even after the ",(0,l.kt)("inlineCode",{parentName:"p"},"VirtualizedListItem")," is removed from the dom."),(0,l.kt)("pre",{className:"language-typescript"},(0,l.kt)("code",{parentName:"pre",className:"language-typescript"},(0,l.kt)("span",{parentName:"code",className:"token keyword"},"function")," ",(0,l.kt)("span",{parentName:"code",className:"token function"},(0,l.kt)("span",{parentName:"span",className:"token maybe-class-name"},"VirtualizedListItem")),(0,l.kt)("span",{parentName:"code",className:"token punctuation"},"("),(0,l.kt)("span",{parentName:"code",className:"token punctuation"},"{"),"\n    children",(0,l.kt)("span",{parentName:"code",className:"token punctuation"},","),"\n    id",(0,l.kt)("span",{parentName:"code",className:"token punctuation"},","),"\n    index\n",(0,l.kt)("span",{parentName:"code",className:"token punctuation"},"}"),(0,l.kt)("span",{parentName:"code",className:"token operator"},":")," ",(0,l.kt)("span",{parentName:"code",className:"token maybe-class-name"},"PropsWithChildren"),(0,l.kt)("span",{parentName:"code",className:"token operator"},"<"),(0,l.kt)("span",{parentName:"code",className:"token punctuation"},"{"),"\n    id",(0,l.kt)("span",{parentName:"code",className:"token operator"},":")," ",(0,l.kt)("span",{parentName:"code",className:"token builtin"},"string"),(0,l.kt)("span",{parentName:"code",className:"token punctuation"},","),"\n    index",(0,l.kt)("span",{parentName:"code",className:"token operator"},":")," ",(0,l.kt)("span",{parentName:"code",className:"token builtin"},"number"),"\n",(0,l.kt)("span",{parentName:"code",className:"token punctuation"},"}"),(0,l.kt)("span",{parentName:"code",className:"token operator"},">"),(0,l.kt)("span",{parentName:"code",className:"token punctuation"},")")," ",(0,l.kt)("span",{parentName:"code",className:"token punctuation"},"{"),"\n    ",(0,l.kt)("span",{parentName:"code",className:"token function"},"useVirtual"),(0,l.kt)("span",{parentName:"code",className:"token punctuation"},"("),(0,l.kt)("span",{parentName:"code",className:"token maybe-class-name"},"ListItem"),(0,l.kt)("span",{parentName:"code",className:"token punctuation"},",")," ",(0,l.kt)("span",{parentName:"code",className:"token punctuation"},"{")," children ",(0,l.kt)("span",{parentName:"code",className:"token punctuation"},"}"),(0,l.kt)("span",{parentName:"code",className:"token punctuation"},",")," index",(0,l.kt)("span",{parentName:"code",className:"token punctuation"},",")," id",(0,l.kt)("span",{parentName:"code",className:"token punctuation"},")"),"\n    ",(0,l.kt)("span",{parentName:"code",className:"token keyword control-flow"},"return")," ",(0,l.kt)("span",{parentName:"code",className:"token keyword null nil"},"null"),"\n",(0,l.kt)("span",{parentName:"code",className:"token punctuation"},"}"),"\n")),(0,l.kt)("br",null),(0,l.kt)("h2",null,"List"),(0,l.kt)("p",null,"Let's create the list, which manages the ",(0,l.kt)("inlineCode",{parentName:"p"},"VirtualizedListItem"),"s.",(0,l.kt)("br",{parentName:"p"}),"\n","Based on the ",(0,l.kt)("inlineCode",{parentName:"p"},"filter")," value we filter an array with values 0-99 if it includes the filter string."),(0,l.kt)("pre",{className:"language-typescript"},(0,l.kt)("code",{parentName:"pre",className:"language-typescript"},(0,l.kt)("span",{parentName:"code",className:"token keyword"},"function")," ",(0,l.kt)("span",{parentName:"code",className:"token function"},(0,l.kt)("span",{parentName:"span",className:"token maybe-class-name"},"List")),(0,l.kt)("span",{parentName:"code",className:"token punctuation"},"("),(0,l.kt)("span",{parentName:"code",className:"token punctuation"},"{")," filter ",(0,l.kt)("span",{parentName:"code",className:"token punctuation"},"}"),(0,l.kt)("span",{parentName:"code",className:"token operator"},":")," ",(0,l.kt)("span",{parentName:"code",className:"token punctuation"},"{")," filter",(0,l.kt)("span",{parentName:"code",className:"token operator"},":")," ",(0,l.kt)("span",{parentName:"code",className:"token builtin"},"string")," ",(0,l.kt)("span",{parentName:"code",className:"token punctuation"},"}"),(0,l.kt)("span",{parentName:"code",className:"token punctuation"},")")," ",(0,l.kt)("span",{parentName:"code",className:"token punctuation"},"{"),"\n    ",(0,l.kt)("span",{parentName:"code",className:"token keyword control-flow"},"return")," ",(0,l.kt)("span",{parentName:"code",className:"token operator"},"<"),(0,l.kt)("span",{parentName:"code",className:"token operator"},">"),"\n        ",(0,l.kt)("span",{parentName:"code",className:"token punctuation"},"{"),"\n            ",(0,l.kt)("span",{parentName:"code",className:"token keyword"},"new")," ",(0,l.kt)("span",{parentName:"code",className:"token class-name"},(0,l.kt)("span",{parentName:"span",className:"token known-class-name class-name"},"Array")),(0,l.kt)("span",{parentName:"code",className:"token punctuation"},"("),(0,l.kt)("span",{parentName:"code",className:"token number"},"100"),(0,l.kt)("span",{parentName:"code",className:"token punctuation"},")"),(0,l.kt)("span",{parentName:"code",className:"token punctuation"},"."),(0,l.kt)("span",{parentName:"code",className:"token method function property-access"},"fill"),(0,l.kt)("span",{parentName:"code",className:"token punctuation"},"("),(0,l.kt)("span",{parentName:"code",className:"token keyword null nil"},"null"),(0,l.kt)("span",{parentName:"code",className:"token punctuation"},")"),"\n                ",(0,l.kt)("span",{parentName:"code",className:"token punctuation"},"."),(0,l.kt)("span",{parentName:"code",className:"token method function property-access"},"map"),(0,l.kt)("span",{parentName:"code",className:"token punctuation"},"("),(0,l.kt)("span",{parentName:"code",className:"token punctuation"},"("),"_",(0,l.kt)("span",{parentName:"code",className:"token punctuation"},",")," i",(0,l.kt)("span",{parentName:"code",className:"token punctuation"},")")," ",(0,l.kt)("span",{parentName:"code",className:"token arrow operator"},"=>")," i",(0,l.kt)("span",{parentName:"code",className:"token punctuation"},")"),"\n                ",(0,l.kt)("span",{parentName:"code",className:"token punctuation"},"."),(0,l.kt)("span",{parentName:"code",className:"token method function property-access"},"filter"),(0,l.kt)("span",{parentName:"code",className:"token punctuation"},"("),(0,l.kt)("span",{parentName:"code",className:"token punctuation"},"("),"i",(0,l.kt)("span",{parentName:"code",className:"token punctuation"},")")," ",(0,l.kt)("span",{parentName:"code",className:"token arrow operator"},"=>")," i",(0,l.kt)("span",{parentName:"code",className:"token punctuation"},"."),(0,l.kt)("span",{parentName:"code",className:"token method function property-access"},"toString"),(0,l.kt)("span",{parentName:"code",className:"token punctuation"},"("),(0,l.kt)("span",{parentName:"code",className:"token punctuation"},")"),(0,l.kt)("span",{parentName:"code",className:"token punctuation"},"."),(0,l.kt)("span",{parentName:"code",className:"token method function property-access"},"includes"),(0,l.kt)("span",{parentName:"code",className:"token punctuation"},"("),"filter",(0,l.kt)("span",{parentName:"code",className:"token punctuation"},")"),(0,l.kt)("span",{parentName:"code",className:"token punctuation"},")"),"\n                ",(0,l.kt)("span",{parentName:"code",className:"token punctuation"},"."),(0,l.kt)("span",{parentName:"code",className:"token method function property-access"},"map"),(0,l.kt)("span",{parentName:"code",className:"token punctuation"},"("),(0,l.kt)("span",{parentName:"code",className:"token punctuation"},"("),"i",(0,l.kt)("span",{parentName:"code",className:"token punctuation"},")")," ",(0,l.kt)("span",{parentName:"code",className:"token arrow operator"},"=>"),"\n                    ",(0,l.kt)("span",{parentName:"code",className:"token operator"},"<"),(0,l.kt)("span",{parentName:"code",className:"token maybe-class-name"},"VirtualizedListItem")," index",(0,l.kt)("span",{parentName:"code",className:"token operator"},"="),(0,l.kt)("span",{parentName:"code",className:"token punctuation"},"{"),"i",(0,l.kt)("span",{parentName:"code",className:"token punctuation"},"}")," id",(0,l.kt)("span",{parentName:"code",className:"token operator"},"="),(0,l.kt)("span",{parentName:"code",className:"token punctuation"},"{"),"i",(0,l.kt)("span",{parentName:"code",className:"token punctuation"},"."),(0,l.kt)("span",{parentName:"code",className:"token method function property-access"},"toString"),(0,l.kt)("span",{parentName:"code",className:"token punctuation"},"("),(0,l.kt)("span",{parentName:"code",className:"token punctuation"},")"),(0,l.kt)("span",{parentName:"code",className:"token punctuation"},"}")," key",(0,l.kt)("span",{parentName:"code",className:"token operator"},"="),(0,l.kt)("span",{parentName:"code",className:"token punctuation"},"{"),"i",(0,l.kt)("span",{parentName:"code",className:"token punctuation"},"}"),(0,l.kt)("span",{parentName:"code",className:"token operator"},">"),(0,l.kt)("span",{parentName:"code",className:"token punctuation"},"{"),"i",(0,l.kt)("span",{parentName:"code",className:"token punctuation"},"}"),(0,l.kt)("span",{parentName:"code",className:"token operator"},"<"),(0,l.kt)("span",{parentName:"code",className:"token operator"},"/"),(0,l.kt)("span",{parentName:"code",className:"token maybe-class-name"},"VirtualizedListItem"),(0,l.kt)("span",{parentName:"code",className:"token operator"},">"),"\n                ",(0,l.kt)("span",{parentName:"code",className:"token punctuation"},")"),"\n        ",(0,l.kt)("span",{parentName:"code",className:"token punctuation"},"}"),"\n    ",(0,l.kt)("span",{parentName:"code",className:"token operator"},"<"),(0,l.kt)("span",{parentName:"code",className:"token operator"},"/"),(0,l.kt)("span",{parentName:"code",className:"token operator"},">"),"\n",(0,l.kt)("span",{parentName:"code",className:"token punctuation"},"}"),"\n")),(0,l.kt)("br",null),(0,l.kt)("h2",null,"ListItem"),(0,l.kt)("p",null,"Now to the ",(0,l.kt)("inlineCode",{parentName:"p"},"ListItem")," that actually gets rendered. Aside from the properties passed by the ",(0,l.kt)("inlineCode",{parentName:"p"},"VirtualListItem"),", in this case only the ",(0,l.kt)("inlineCode",{parentName:"p"},"children")," property, we also get a ",(0,l.kt)("inlineCode",{parentName:"p"},"connected")," flag and a ",(0,l.kt)("inlineCode",{parentName:"p"},"destroy")," function as properties.",(0,l.kt)("br",{parentName:"p"}),"\n","The ",(0,l.kt)("inlineCode",{parentName:"p"},"connected")," flag is true when owner component is alive. As soon as the ",(0,l.kt)("inlineCode",{parentName:"p"},"ListItem")," gets destroyed, the ",(0,l.kt)("inlineCode",{parentName:"p"},"connected")," flag we turn false and all the properties assigned by the owner are removed.",(0,l.kt)("br",{parentName:"p"}),"\n","The ",(0,l.kt)("inlineCode",{parentName:"p"},"destroy")," function enables the ",(0,l.kt)("inlineCode",{parentName:"p"},"ListItem")," to destroy iteself after it's not needed anymore. In this case we destroy it after the element is not visible anymore."),(0,l.kt)("p",null,"For this example we use ",(0,l.kt)("inlineCode",{parentName:"p"},"react-spring")," to animate the ",(0,l.kt)("inlineCode",{parentName:"p"},"maxWidth"),", ",(0,l.kt)("inlineCode",{parentName:"p"},"padding"),", ",(0,l.kt)("inlineCode",{parentName:"p"},"opacity")," based on the ",(0,l.kt)("inlineCode",{parentName:"p"},"connected")," flag."),(0,l.kt)("p",null,"We store the ",(0,l.kt)("inlineCode",{parentName:"p"},"children")," property into the ",(0,l.kt)("inlineCode",{parentName:"p"},"childrenRef")," to ensure we keep the value even after it is removed we it's owner, the ",(0,l.kt)("inlineCode",{parentName:"p"},"ListItem"),", is disconnected."),(0,l.kt)("pre",{className:"language-typescript"},(0,l.kt)("code",{parentName:"pre",className:"language-typescript"},(0,l.kt)("span",{parentName:"code",className:"token keyword"},"function")," ",(0,l.kt)("span",{parentName:"code",className:"token function"},(0,l.kt)("span",{parentName:"span",className:"token maybe-class-name"},"ListItem")),(0,l.kt)("span",{parentName:"code",className:"token punctuation"},"("),(0,l.kt)("span",{parentName:"code",className:"token punctuation"},"{"),"\n    destroy",(0,l.kt)("span",{parentName:"code",className:"token punctuation"},","),"\n    connected",(0,l.kt)("span",{parentName:"code",className:"token punctuation"},","),"\n    children",(0,l.kt)("span",{parentName:"code",className:"token operator"},":")," c\n",(0,l.kt)("span",{parentName:"code",className:"token punctuation"},"}"),(0,l.kt)("span",{parentName:"code",className:"token operator"},":")," ",(0,l.kt)("span",{parentName:"code",className:"token maybe-class-name"},"PropsWithChildren"),(0,l.kt)("span",{parentName:"code",className:"token operator"},"<"),(0,l.kt)("span",{parentName:"code",className:"token maybe-class-name"},"VirtualProps"),(0,l.kt)("span",{parentName:"code",className:"token operator"},">"),(0,l.kt)("span",{parentName:"code",className:"token punctuation"},")")," ",(0,l.kt)("span",{parentName:"code",className:"token punctuation"},"{"),"\n    ",(0,l.kt)("span",{parentName:"code",className:"token keyword"},"const")," ",(0,l.kt)("span",{parentName:"code",className:"token punctuation"},"["),(0,l.kt)("span",{parentName:"code",className:"token punctuation"},"{")," maxWidth",(0,l.kt)("span",{parentName:"code",className:"token punctuation"},",")," padding",(0,l.kt)("span",{parentName:"code",className:"token punctuation"},",")," opacity ",(0,l.kt)("span",{parentName:"code",className:"token punctuation"},"}"),(0,l.kt)("span",{parentName:"code",className:"token punctuation"},",")," api",(0,l.kt)("span",{parentName:"code",className:"token punctuation"},"]")," ",(0,l.kt)("span",{parentName:"code",className:"token operator"},"=")," ",(0,l.kt)("span",{parentName:"code",className:"token function"},"useSpring"),(0,l.kt)("span",{parentName:"code",className:"token punctuation"},"("),(0,l.kt)("span",{parentName:"code",className:"token punctuation"},"{"),"\n        maxWidth",(0,l.kt)("span",{parentName:"code",className:"token operator"},":")," ",(0,l.kt)("span",{parentName:"code",className:"token number"},"0"),(0,l.kt)("span",{parentName:"code",className:"token punctuation"},","),"\n        padding",(0,l.kt)("span",{parentName:"code",className:"token operator"},":")," ",(0,l.kt)("span",{parentName:"code",className:"token number"},"0"),(0,l.kt)("span",{parentName:"code",className:"token punctuation"},","),"\n        opacity",(0,l.kt)("span",{parentName:"code",className:"token operator"},":")," ",(0,l.kt)("span",{parentName:"code",className:"token number"},"0"),(0,l.kt)("span",{parentName:"code",className:"token punctuation"},","),"\n        onRest",(0,l.kt)("span",{parentName:"code",className:"token operator"},":")," ",(0,l.kt)("span",{parentName:"code",className:"token punctuation"},"{"),"\n            ",(0,l.kt)("span",{parentName:"code",className:"token function-variable function"},"maxWidth"),(0,l.kt)("span",{parentName:"code",className:"token operator"},":")," ",(0,l.kt)("span",{parentName:"code",className:"token punctuation"},"("),"val",(0,l.kt)("span",{parentName:"code",className:"token punctuation"},")")," ",(0,l.kt)("span",{parentName:"code",className:"token arrow operator"},"=>")," ",(0,l.kt)("span",{parentName:"code",className:"token punctuation"},"{"),"\n                ",(0,l.kt)("span",{parentName:"code",className:"token keyword control-flow"},"if")," ",(0,l.kt)("span",{parentName:"code",className:"token punctuation"},"("),"val",(0,l.kt)("span",{parentName:"code",className:"token punctuation"},"."),(0,l.kt)("span",{parentName:"code",className:"token property-access"},"value")," ",(0,l.kt)("span",{parentName:"code",className:"token operator"},"===")," ",(0,l.kt)("span",{parentName:"code",className:"token number"},"0"),(0,l.kt)("span",{parentName:"code",className:"token punctuation"},")")," ",(0,l.kt)("span",{parentName:"code",className:"token punctuation"},"{"),"\n                    ",(0,l.kt)("span",{parentName:"code",className:"token function"},"destroy"),(0,l.kt)("span",{parentName:"code",className:"token punctuation"},"("),(0,l.kt)("span",{parentName:"code",className:"token punctuation"},")"),"\n                ",(0,l.kt)("span",{parentName:"code",className:"token punctuation"},"}"),"\n            ",(0,l.kt)("span",{parentName:"code",className:"token punctuation"},"}"),"\n        ",(0,l.kt)("span",{parentName:"code",className:"token punctuation"},"}"),"\n    ",(0,l.kt)("span",{parentName:"code",className:"token punctuation"},"}"),(0,l.kt)("span",{parentName:"code",className:"token punctuation"},",")," ",(0,l.kt)("span",{parentName:"code",className:"token punctuation"},"["),(0,l.kt)("span",{parentName:"code",className:"token punctuation"},"]"),(0,l.kt)("span",{parentName:"code",className:"token punctuation"},")"),"\n    ",(0,l.kt)("span",{parentName:"code",className:"token function"},"useEffect"),(0,l.kt)("span",{parentName:"code",className:"token punctuation"},"("),(0,l.kt)("span",{parentName:"code",className:"token punctuation"},"("),(0,l.kt)("span",{parentName:"code",className:"token punctuation"},")")," ",(0,l.kt)("span",{parentName:"code",className:"token arrow operator"},"=>")," ",(0,l.kt)("span",{parentName:"code",className:"token punctuation"},"{"),"\n        api",(0,l.kt)("span",{parentName:"code",className:"token punctuation"},"."),(0,l.kt)("span",{parentName:"code",className:"token method function property-access"},"start"),(0,l.kt)("span",{parentName:"code",className:"token punctuation"},"("),(0,l.kt)("span",{parentName:"code",className:"token punctuation"},"{"),"\n            maxWidth",(0,l.kt)("span",{parentName:"code",className:"token operator"},":")," connected ",(0,l.kt)("span",{parentName:"code",className:"token operator"},"?")," ",(0,l.kt)("span",{parentName:"code",className:"token number"},"50")," ",(0,l.kt)("span",{parentName:"code",className:"token operator"},":")," ",(0,l.kt)("span",{parentName:"code",className:"token number"},"0"),(0,l.kt)("span",{parentName:"code",className:"token punctuation"},","),"\n            padding",(0,l.kt)("span",{parentName:"code",className:"token operator"},":")," connected ",(0,l.kt)("span",{parentName:"code",className:"token operator"},"?")," ",(0,l.kt)("span",{parentName:"code",className:"token number"},"10")," ",(0,l.kt)("span",{parentName:"code",className:"token operator"},":")," ",(0,l.kt)("span",{parentName:"code",className:"token number"},"0"),(0,l.kt)("span",{parentName:"code",className:"token punctuation"},","),"\n            opacity",(0,l.kt)("span",{parentName:"code",className:"token operator"},":")," connected ",(0,l.kt)("span",{parentName:"code",className:"token operator"},"?")," ",(0,l.kt)("span",{parentName:"code",className:"token number"},"1")," ",(0,l.kt)("span",{parentName:"code",className:"token operator"},":")," ",(0,l.kt)("span",{parentName:"code",className:"token number"},"0"),"\n        ",(0,l.kt)("span",{parentName:"code",className:"token punctuation"},"}"),(0,l.kt)("span",{parentName:"code",className:"token punctuation"},")"),"\n    ",(0,l.kt)("span",{parentName:"code",className:"token punctuation"},"}"),(0,l.kt)("span",{parentName:"code",className:"token punctuation"},",")," ",(0,l.kt)("span",{parentName:"code",className:"token punctuation"},"["),"connected",(0,l.kt)("span",{parentName:"code",className:"token punctuation"},"]"),(0,l.kt)("span",{parentName:"code",className:"token punctuation"},")"),"\n    \n    ",(0,l.kt)("span",{parentName:"code",className:"token keyword"},"const")," childrenRef ",(0,l.kt)("span",{parentName:"code",className:"token operator"},"=")," ",(0,l.kt)("span",{parentName:"code",className:"token function"},"useRef"),(0,l.kt)("span",{parentName:"code",className:"token punctuation"},"("),"c",(0,l.kt)("span",{parentName:"code",className:"token punctuation"},")"),"\n    ",(0,l.kt)("span",{parentName:"code",className:"token keyword"},"const")," children ",(0,l.kt)("span",{parentName:"code",className:"token operator"},"=")," ",(0,l.kt)("span",{parentName:"code",className:"token function"},"useMemo"),(0,l.kt)("span",{parentName:"code",className:"token punctuation"},"("),(0,l.kt)("span",{parentName:"code",className:"token punctuation"},"("),(0,l.kt)("span",{parentName:"code",className:"token punctuation"},")")," ",(0,l.kt)("span",{parentName:"code",className:"token arrow operator"},"=>")," ",(0,l.kt)("span",{parentName:"code",className:"token punctuation"},"{"),"\n        ",(0,l.kt)("span",{parentName:"code",className:"token keyword control-flow"},"if")," ",(0,l.kt)("span",{parentName:"code",className:"token punctuation"},"("),"connected",(0,l.kt)("span",{parentName:"code",className:"token punctuation"},")")," ",(0,l.kt)("span",{parentName:"code",className:"token punctuation"},"{"),"\n            childrenRef",(0,l.kt)("span",{parentName:"code",className:"token punctuation"},"."),(0,l.kt)("span",{parentName:"code",className:"token property-access"},"current")," ",(0,l.kt)("span",{parentName:"code",className:"token operator"},"=")," c\n        ",(0,l.kt)("span",{parentName:"code",className:"token punctuation"},"}"),"\n        ",(0,l.kt)("span",{parentName:"code",className:"token keyword control-flow"},"return")," childrenRef",(0,l.kt)("span",{parentName:"code",className:"token punctuation"},"."),(0,l.kt)("span",{parentName:"code",className:"token property-access"},"current"),"\n    ",(0,l.kt)("span",{parentName:"code",className:"token punctuation"},"}"),(0,l.kt)("span",{parentName:"code",className:"token punctuation"},",")," ",(0,l.kt)("span",{parentName:"code",className:"token punctuation"},"["),"connected",(0,l.kt)("span",{parentName:"code",className:"token punctuation"},",")," c",(0,l.kt)("span",{parentName:"code",className:"token punctuation"},"]"),(0,l.kt)("span",{parentName:"code",className:"token punctuation"},")"),"\n    ",(0,l.kt)("span",{parentName:"code",className:"token keyword control-flow"},"return")," ",(0,l.kt)("span",{parentName:"code",className:"token operator"},"<"),"a",(0,l.kt)("span",{parentName:"code",className:"token punctuation"},"."),(0,l.kt)("span",{parentName:"code",className:"token property-access"},"span")," style",(0,l.kt)("span",{parentName:"code",className:"token operator"},"="),(0,l.kt)("span",{parentName:"code",className:"token punctuation"},"{"),(0,l.kt)("span",{parentName:"code",className:"token punctuation"},"{"),"\n        opacity",(0,l.kt)("span",{parentName:"code",className:"token punctuation"},","),"\n        paddingLeft",(0,l.kt)("span",{parentName:"code",className:"token operator"},":")," padding",(0,l.kt)("span",{parentName:"code",className:"token punctuation"},","),"\n        paddingTop",(0,l.kt)("span",{parentName:"code",className:"token operator"},":")," ",(0,l.kt)("span",{parentName:"code",className:"token number"},"10"),(0,l.kt)("span",{parentName:"code",className:"token punctuation"},","),"\n        paddingBottom",(0,l.kt)("span",{parentName:"code",className:"token operator"},":")," ",(0,l.kt)("span",{parentName:"code",className:"token number"},"10"),(0,l.kt)("span",{parentName:"code",className:"token punctuation"},","),"\n        paddingRight",(0,l.kt)("span",{parentName:"code",className:"token operator"},":")," padding",(0,l.kt)("span",{parentName:"code",className:"token punctuation"},","),"\n        fontSize",(0,l.kt)("span",{parentName:"code",className:"token operator"},":")," ",(0,l.kt)("span",{parentName:"code",className:"token number"},"30"),(0,l.kt)("span",{parentName:"code",className:"token punctuation"},","),"\n        maxWidth",(0,l.kt)("span",{parentName:"code",className:"token punctuation"},","),"\n        overflow",(0,l.kt)("span",{parentName:"code",className:"token operator"},":")," ",(0,l.kt)("span",{parentName:"code",className:"token string"},'"hidden"'),"\n    ",(0,l.kt)("span",{parentName:"code",className:"token punctuation"},"}"),(0,l.kt)("span",{parentName:"code",className:"token punctuation"},"}"),(0,l.kt)("span",{parentName:"code",className:"token operator"},">"),"\n        ",(0,l.kt)("span",{parentName:"code",className:"token punctuation"},"{"),"children",(0,l.kt)("span",{parentName:"code",className:"token punctuation"},"}"),"\n    ",(0,l.kt)("span",{parentName:"code",className:"token operator"},"<"),(0,l.kt)("span",{parentName:"code",className:"token operator"},"/"),"a",(0,l.kt)("span",{parentName:"code",className:"token punctuation"},"."),(0,l.kt)("span",{parentName:"code",className:"token property-access"},"span"),(0,l.kt)("span",{parentName:"code",className:"token operator"},">"),"\n",(0,l.kt)("span",{parentName:"code",className:"token punctuation"},"}"),"\n")),(0,l.kt)("br",null),(0,l.kt)("h2",null,"Page"),(0,l.kt)("p",null,"Now let's bring everything together into a page, including a toggle button.",(0,l.kt)("br",{parentName:"p"}),"\n","We have to wrap the ",(0,l.kt)("inlineCode",{parentName:"p"},"List")," into a ",(0,l.kt)("inlineCode",{parentName:"p"},"VirtualBase")," component, which serves as the base where all the virtual items will be added.",(0,l.kt)("br",{parentName:"p"}),"\n","The ",(0,l.kt)("inlineCode",{parentName:"p"},"VirtualBase")," keeps track of all the virtual components and provides them with the ",(0,l.kt)("inlineCode",{parentName:"p"},"destroy")," and ",(0,l.kt)("inlineCode",{parentName:"p"},"connected")," properties."),(0,l.kt)("pre",{className:"language-typescript"},(0,l.kt)("code",{parentName:"pre",className:"language-typescript"},(0,l.kt)("span",{parentName:"code",className:"token keyword"},"function")," ",(0,l.kt)("span",{parentName:"code",className:"token function"},(0,l.kt)("span",{parentName:"span",className:"token maybe-class-name"},"Page")),(0,l.kt)("span",{parentName:"code",className:"token punctuation"},"("),(0,l.kt)("span",{parentName:"code",className:"token punctuation"},")")," ",(0,l.kt)("span",{parentName:"code",className:"token punctuation"},"{"),"\n    ",(0,l.kt)("span",{parentName:"code",className:"token keyword"},"const")," ",(0,l.kt)("span",{parentName:"code",className:"token punctuation"},"["),"search",(0,l.kt)("span",{parentName:"code",className:"token punctuation"},",")," setSearch",(0,l.kt)("span",{parentName:"code",className:"token punctuation"},"]")," ",(0,l.kt)("span",{parentName:"code",className:"token operator"},"=")," ",(0,l.kt)("span",{parentName:"code",className:"token function"},"useState"),(0,l.kt)("span",{parentName:"code",className:"token punctuation"},"("),(0,l.kt)("span",{parentName:"code",className:"token string"},'""'),(0,l.kt)("span",{parentName:"code",className:"token punctuation"},")"),"\n    ",(0,l.kt)("span",{parentName:"code",className:"token keyword control-flow"},"return")," ",(0,l.kt)("span",{parentName:"code",className:"token punctuation"},"("),"\n        ",(0,l.kt)("span",{parentName:"code",className:"token operator"},"<"),"div className",(0,l.kt)("span",{parentName:"code",className:"token operator"},"="),(0,l.kt)("span",{parentName:"code",className:"token string"},'"p-3"')," style",(0,l.kt)("span",{parentName:"code",className:"token operator"},"="),(0,l.kt)("span",{parentName:"code",className:"token punctuation"},"{"),(0,l.kt)("span",{parentName:"code",className:"token punctuation"},"{")," display",(0,l.kt)("span",{parentName:"code",className:"token operator"},":")," ",(0,l.kt)("span",{parentName:"code",className:"token string"},'"flex"'),(0,l.kt)("span",{parentName:"code",className:"token punctuation"},",")," flexDirection",(0,l.kt)("span",{parentName:"code",className:"token operator"},":")," ",(0,l.kt)("span",{parentName:"code",className:"token string"},'"column"')," ",(0,l.kt)("span",{parentName:"code",className:"token punctuation"},"}"),(0,l.kt)("span",{parentName:"code",className:"token punctuation"},"}"),(0,l.kt)("span",{parentName:"code",className:"token operator"},">"),"\n            ",(0,l.kt)("span",{parentName:"code",className:"token operator"},"<"),"input\n                value",(0,l.kt)("span",{parentName:"code",className:"token operator"},"="),(0,l.kt)("span",{parentName:"code",className:"token punctuation"},"{"),"search",(0,l.kt)("span",{parentName:"code",className:"token punctuation"},"}"),"\n                onChange",(0,l.kt)("span",{parentName:"code",className:"token operator"},"="),(0,l.kt)("span",{parentName:"code",className:"token punctuation"},"{"),"e ",(0,l.kt)("span",{parentName:"code",className:"token arrow operator"},"=>"),(0,l.kt)("span",{parentName:"code",className:"token function"},"setSearch"),(0,l.kt)("span",{parentName:"code",className:"token punctuation"},"("),"e",(0,l.kt)("span",{parentName:"code",className:"token punctuation"},"."),(0,l.kt)("span",{parentName:"code",className:"token property-access"},"target"),(0,l.kt)("span",{parentName:"code",className:"token punctuation"},"."),(0,l.kt)("span",{parentName:"code",className:"token property-access"},"value"),(0,l.kt)("span",{parentName:"code",className:"token punctuation"},")"),(0,l.kt)("span",{parentName:"code",className:"token punctuation"},"}"),"\n                type",(0,l.kt)("span",{parentName:"code",className:"token operator"},"="),(0,l.kt)("span",{parentName:"code",className:"token string"},'"text"'),"\n                className",(0,l.kt)("span",{parentName:"code",className:"token operator"},"="),(0,l.kt)("span",{parentName:"code",className:"token string"},'"form-control"'),"\n                placeholder",(0,l.kt)("span",{parentName:"code",className:"token operator"},"="),(0,l.kt)("span",{parentName:"code",className:"token string"},'"Search"'),"\n            ",(0,l.kt)("span",{parentName:"code",className:"token operator"},"/"),(0,l.kt)("span",{parentName:"code",className:"token operator"},">"),"\n            ",(0,l.kt)("span",{parentName:"code",className:"token operator"},"<"),"div style",(0,l.kt)("span",{parentName:"code",className:"token operator"},"="),(0,l.kt)("span",{parentName:"code",className:"token punctuation"},"{"),(0,l.kt)("span",{parentName:"code",className:"token punctuation"},"{"),"\n                flexWrap",(0,l.kt)("span",{parentName:"code",className:"token operator"},":")," ",(0,l.kt)("span",{parentName:"code",className:"token string"},'"wrap"'),(0,l.kt)("span",{parentName:"code",className:"token punctuation"},","),"\n                display",(0,l.kt)("span",{parentName:"code",className:"token operator"},":")," ",(0,l.kt)("span",{parentName:"code",className:"token string"},'"flex"'),(0,l.kt)("span",{parentName:"code",className:"token punctuation"},","),"\n                flexDirection",(0,l.kt)("span",{parentName:"code",className:"token operator"},":")," ",(0,l.kt)("span",{parentName:"code",className:"token string"},'"row"'),"\n            ",(0,l.kt)("span",{parentName:"code",className:"token punctuation"},"}"),(0,l.kt)("span",{parentName:"code",className:"token punctuation"},"}"),(0,l.kt)("span",{parentName:"code",className:"token operator"},">"),"\n                ",(0,l.kt)("span",{parentName:"code",className:"token operator"},"<"),(0,l.kt)("span",{parentName:"code",className:"token maybe-class-name"},"VirtualBase"),(0,l.kt)("span",{parentName:"code",className:"token operator"},">"),"\n                    ",(0,l.kt)("span",{parentName:"code",className:"token operator"},"<"),(0,l.kt)("span",{parentName:"code",className:"token maybe-class-name"},"List")," filter",(0,l.kt)("span",{parentName:"code",className:"token operator"},"="),(0,l.kt)("span",{parentName:"code",className:"token punctuation"},"{"),"search",(0,l.kt)("span",{parentName:"code",className:"token punctuation"},"}")," ",(0,l.kt)("span",{parentName:"code",className:"token operator"},"/"),(0,l.kt)("span",{parentName:"code",className:"token operator"},">"),"\n                ",(0,l.kt)("span",{parentName:"code",className:"token operator"},"<"),(0,l.kt)("span",{parentName:"code",className:"token operator"},"/"),(0,l.kt)("span",{parentName:"code",className:"token maybe-class-name"},"VirtualBase"),(0,l.kt)("span",{parentName:"code",className:"token operator"},">"),"\n            ",(0,l.kt)("span",{parentName:"code",className:"token operator"},"<"),(0,l.kt)("span",{parentName:"code",className:"token operator"},"/"),"div",(0,l.kt)("span",{parentName:"code",className:"token operator"},">"),"\n        ",(0,l.kt)("span",{parentName:"code",className:"token operator"},"<"),(0,l.kt)("span",{parentName:"code",className:"token operator"},"/"),"div",(0,l.kt)("span",{parentName:"code",className:"token operator"},">"),"\n    ",(0,l.kt)("span",{parentName:"code",className:"token punctuation"},")"),"\n",(0,l.kt)("span",{parentName:"code",className:"token punctuation"},"}"),"\n")))}u.isMDXComponent=!0;var f=t(4246);function h(){var e=(0,o.useState)(""),a=e[0],t=e[1];return(0,f.jsxs)("div",{className:"d-flex flex-column fullscreen",children:[(0,f.jsxs)(s.default,{children:[(0,f.jsx)("title",{children:"co-virtualize"}),(0,f.jsx)("meta",{name:"description",content:"At Coconut XR we bring 3D to the Web, Augmented Reality (AR), Virtual Reality (VR) and XR / WebXR. We connect people and business using the latest collaboration and multiuser technologies with a strong background in cloud and distributed development. With many years of experience in software development and fresh ideas we thrive to build the applications of the future."}),(0,f.jsx)("meta",{name:"viewport",content:"initial-scale=1.0, width=device-width"}),(0,f.jsx)("link",{rel:"icon",type:"image/svg+xml",href:"/res/icon.svg"}),(0,f.jsx)("link",{rel:"mask-icon",href:"/res/icon.svg",color:"#fff"})]}),(0,f.jsx)(r.h,{selectedIndex:0}),(0,f.jsxs)("div",{className:"p-3",style:{display:"flex",flexDirection:"column"},children:[(0,f.jsx)("input",{value:a,onChange:function(e){return t(e.target.value)},type:"text",className:"form-control",placeholder:"Search"}),(0,f.jsx)("div",{style:{flexWrap:"wrap",display:"flex",flexDirection:"row"},children:(0,f.jsx)(c.VirtualBase,{children:(0,f.jsx)(g,{filter:a})})})]}),(0,f.jsx)("div",{className:"border-top border-2 bt-1 p-3",children:(0,f.jsx)(u,{})}),(0,f.jsx)(m.$,{})]})}function g(e){var a=e.filter;return(0,f.jsx)(f.Fragment,{children:new Array(100).fill(null).map((function(e,a){return a})).filter((function(e){return e.toString().includes(a)})).map((function(e){return(0,f.jsx)(y,{index:e,id:e.toString(),children:e},e)}))})}function y(e){var a=e.children,t=e.id,n=e.index;return(0,c.useVirtual)(v,{children:a},n,t),null}function v(e){var a=e.destroy,t=e.connected,s=e.children,c=(0,o.useRef)(s),r=(0,p.useSpring)({maxWidth:0,padding:0,opacity:0,onRest:{maxWidth:function(e){0===e.value&&a()}}},[]),m=(0,n.Z)(r,2),k=m[0],N=k.maxWidth,l=k.padding,i=k.opacity,d=m[1];(0,o.useEffect)((function(){d.start({maxWidth:t?50:0,padding:t?10:0,opacity:t?1:0})}),[t]);var u=(0,o.useMemo)((function(){return t&&(c.current=s),c.current}),[t,s]);return(0,f.jsx)(p.a.span,{style:{opacity:i,paddingLeft:l,paddingTop:10,paddingBottom:10,paddingRight:l,fontSize:30,maxWidth:N,overflow:"hidden"},children:u})}},1468:function(e,a,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/list",function(){return t(5478)}])}},function(e){e.O(0,[29,866,774,888,179],(function(){return a=1468,e(e.s=a);var a}));var a=e.O();_N_E=a}]);